{"ast":null,"code":"var _jsxFileName = \"D:\\\\SAI DT\\\\Z444\\\\Z444pro\\\\src\\\\components\\\\Reports.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { supabase } from '../supabase';\nimport { UserContext } from '../contexts/UserContext';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nfunction Reports() {\n  _s();\n  const [jobStats, setJobStats] = useState([]);\n  const {\n    user\n  } = useContext(UserContext);\n  useEffect(() => {\n    fetchJobStats();\n  }, []);\n  async function fetchJobStats() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('job_openings').select('job_type').not('job_type', 'is', null);\n      if (error) throw error;\n      const stats = data.reduce((acc, curr) => {\n        acc[curr.job_type] = (acc[curr.job_type] || 0) + 1;\n        return acc;\n      }, {});\n      setJobStats(Object.entries(stats).map(([job_type, count]) => ({\n        job_type,\n        count\n      })));\n    } catch (error) {\n      console.error('Error fetching job stats:', error);\n      Swal.fire({\n        icon: 'error',\n        title: 'Error',\n        text: 'Failed to fetch job statistics. Please try again later.'\n      });\n    }\n  }\n  const chartData = {\n    labels: jobStats.map(stat => stat.job_type || 'Unspecified'),\n    datasets: [{\n      label: 'Number of Job Openings',\n      data: jobStats.map(stat => stat.count),\n      backgroundColor: 'rgba(75, 192, 192, 0.6)'\n    }]\n  };\n  const chartOptions = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top',\n        labels: {\n          color: '#f8f9fa'\n        }\n      },\n      title: {\n        display: true,\n        text: 'Job Openings by Type',\n        color: '#f8f9fa'\n      }\n    },\n    scales: {\n      x: {\n        ticks: {\n          color: '#f8f9fa'\n        },\n        grid: {\n          color: 'rgba(255, 255, 255, 0.1)'\n        }\n      },\n      y: {\n        ticks: {\n          color: '#f8f9fa'\n        },\n        grid: {\n          color: 'rgba(255, 255, 255, 0.1)'\n        }\n      }\n    }\n  };\n  if (!user || user.role !== 'admin') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mt-5 text-light\",\n      children: \"Access Denied\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-light\",\n      children: \"Reports\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: jobStats.length > 0 ? /*#__PURE__*/_jsxDEV(Bar, {\n        data: chartData,\n        options: chartOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-light\",\n        children: \"No job data available.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n_s(Reports, \"RhJnrWx4uFcY94AKzjljjwx6rQI=\");\n_c = Reports;\nexport default Reports;\nvar _c;\n$RefreshReg$(_c, \"Reports\");","map":{"version":3,"names":["React","useState","useEffect","useContext","supabase","UserContext","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","Swal","jsxDEV","_jsxDEV","register","Reports","_s","jobStats","setJobStats","user","fetchJobStats","data","error","from","select","not","stats","reduce","acc","curr","job_type","Object","entries","map","count","console","fire","icon","title","text","chartData","labels","stat","datasets","label","backgroundColor","chartOptions","responsive","plugins","legend","position","color","display","scales","x","ticks","grid","y","role","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","options","_c","$RefreshReg$"],"sources":["D:/SAI DT/Z444/Z444pro/src/components/Reports.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { supabase } from '../supabase';\r\nimport { UserContext } from '../contexts/UserContext';\r\nimport { Bar } from 'react-chartjs-2';\r\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\r\nimport Swal from 'sweetalert2';\r\n\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\nfunction Reports() {\r\n  const [jobStats, setJobStats] = useState([]);\r\n  const { user } = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    fetchJobStats();\r\n  }, []);\r\n\r\n  async function fetchJobStats() {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('job_openings')\r\n        .select('job_type')\r\n        .not('job_type', 'is', null);\r\n\r\n      if (error) throw error;\r\n\r\n      const stats = data.reduce((acc, curr) => {\r\n        acc[curr.job_type] = (acc[curr.job_type] || 0) + 1;\r\n        return acc;\r\n      }, {});\r\n\r\n      setJobStats(Object.entries(stats).map(([job_type, count]) => ({ job_type, count })));\r\n    } catch (error) {\r\n      console.error('Error fetching job stats:', error);\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Error',\r\n        text: 'Failed to fetch job statistics. Please try again later.'\r\n      });\r\n    }\r\n  }\r\n\r\n  const chartData = {\r\n    labels: jobStats.map(stat => stat.job_type || 'Unspecified'),\r\n    datasets: [\r\n      {\r\n        label: 'Number of Job Openings',\r\n        data: jobStats.map(stat => stat.count),\r\n        backgroundColor: 'rgba(75, 192, 192, 0.6)',\r\n      },\r\n    ],\r\n  };\r\n\r\n  const chartOptions = {\r\n    responsive: true,\r\n    plugins: {\r\n      legend: {\r\n        position: 'top',\r\n        labels: {\r\n          color: '#f8f9fa'\r\n        }\r\n      },\r\n      title: {\r\n        display: true,\r\n        text: 'Job Openings by Type',\r\n        color: '#f8f9fa'\r\n      },\r\n    },\r\n    scales: {\r\n      x: {\r\n        ticks: { color: '#f8f9fa' },\r\n        grid: { color: 'rgba(255, 255, 255, 0.1)' }\r\n      },\r\n      y: {\r\n        ticks: { color: '#f8f9fa' },\r\n        grid: { color: 'rgba(255, 255, 255, 0.1)' }\r\n      }\r\n    }\r\n  };\r\n\r\n  if (!user || user.role !== 'admin') {\r\n    return <div className=\"container mt-5 text-light\">Access Denied</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2 className=\"text-light\">Reports</h2>\r\n      <div className=\"mt-4\">\r\n        {jobStats.length > 0 ? (\r\n          <Bar data={chartData} options={chartOptions} />\r\n        ) : (\r\n          <p className=\"text-light\">No job data available.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reports;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}