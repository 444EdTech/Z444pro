{"ast":null,"code":"var _jsxFileName = \"D:\\\\SAI DT\\\\Z444\\\\Z444pro\\\\src\\\\components\\\\JoinGroup.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { supabase } from '../supabase';\nimport { UserContext } from '../contexts/UserContext';\nimport { ThemeContext } from '../contexts/ThemeContext';\nimport Swal from 'sweetalert2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction JoinGroup() {\n  _s();\n  const [availableGroups, setAvailableGroups] = useState([]);\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    theme\n  } = useContext(ThemeContext);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchAvailableGroups();\n  }, []);\n  async function fetchAvailableGroups() {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('groups').select('*');\n      if (error) throw error;\n      const filteredGroups = data.filter(group => !group.members.includes(user.id));\n      setAvailableGroups(filteredGroups);\n    } catch (error) {\n      console.error('Error fetching available groups:', error);\n      Swal.fire('Error', 'Failed to fetch available groups. Please try again later.', 'error');\n    }\n  }\n  async function handleJoinGroup(groupId) {\n    try {\n      const {\n        data,\n        error\n      } = await supabase.from('groups').select('members').eq('id', groupId).single();\n      if (error) throw error;\n      const updatedMembers = [...data.members, user.id];\n      const {\n        error: updateError\n      } = await supabase.from('groups').update({\n        members: updatedMembers\n      }).eq('id', groupId);\n      if (updateError) throw updateError;\n      Swal.fire('Success', 'You have joined the group!', 'success');\n      navigate(`/chats`, {\n        state: {\n          activeGroup: groupId\n        }\n      });\n    } catch (error) {\n      console.error('Error joining group:', error);\n      Swal.fire('Error', 'Failed to join group. Please try again.', 'error');\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"join-group container mt-4\",\n    style: {\n      backgroundColor: theme.background,\n      color: theme.text\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Available Groups\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), availableGroups.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No available groups to join.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"list-group mt-3\",\n      children: availableGroups.map(group => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list-group-item d-flex justify-content-between align-items-center\",\n        style: {\n          backgroundColor: theme.background,\n          color: theme.text,\n          borderColor: theme.border\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: group.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: group.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-sm\",\n          onClick: () => handleJoinGroup(group.id),\n          children: \"Join\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 15\n        }, this)]\n      }, group.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(JoinGroup, \"O6mZhxNhBLe4TYNqCUeDpoHgdh0=\", false, function () {\n  return [useNavigate];\n});\n_c = JoinGroup;\nexport default JoinGroup;\nvar _c;\n$RefreshReg$(_c, \"JoinGroup\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","supabase","UserContext","ThemeContext","Swal","jsxDEV","_jsxDEV","JoinGroup","_s","availableGroups","setAvailableGroups","user","theme","navigate","fetchAvailableGroups","data","error","from","select","filteredGroups","filter","group","members","includes","id","console","fire","handleJoinGroup","groupId","eq","single","updatedMembers","updateError","update","state","activeGroup","className","style","backgroundColor","background","color","text","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","borderColor","border","name","description","onClick","_c","$RefreshReg$"],"sources":["D:/SAI DT/Z444/Z444pro/src/components/JoinGroup.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { supabase } from '../supabase';\r\nimport { UserContext } from '../contexts/UserContext';\r\nimport { ThemeContext } from '../contexts/ThemeContext';\r\nimport Swal from 'sweetalert2';\r\n\r\nfunction JoinGroup() {\r\n  const [availableGroups, setAvailableGroups] = useState([]);\r\n  const { user } = useContext(UserContext);\r\n  const { theme } = useContext(ThemeContext);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchAvailableGroups();\r\n  }, []);\r\n\r\n  async function fetchAvailableGroups() {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('groups')\r\n        .select('*');\r\n\r\n      if (error) throw error;\r\n\r\n      const filteredGroups = data.filter(group => !group.members.includes(user.id));\r\n      setAvailableGroups(filteredGroups);\r\n    } catch (error) {\r\n      console.error('Error fetching available groups:', error);\r\n      Swal.fire('Error', 'Failed to fetch available groups. Please try again later.', 'error');\r\n    }\r\n  }\r\n\r\n  async function handleJoinGroup(groupId) {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('groups')\r\n        .select('members')\r\n        .eq('id', groupId)\r\n        .single();\r\n\r\n      if (error) throw error;\r\n\r\n      const updatedMembers = [...data.members, user.id];\r\n\r\n      const { error: updateError } = await supabase\r\n        .from('groups')\r\n        .update({ members: updatedMembers })\r\n        .eq('id', groupId);\r\n\r\n      if (updateError) throw updateError;\r\n\r\n      Swal.fire('Success', 'You have joined the group!', 'success');\r\n      navigate(`/chats`, { state: { activeGroup: groupId } });\r\n    } catch (error) {\r\n      console.error('Error joining group:', error);\r\n      Swal.fire('Error', 'Failed to join group. Please try again.', 'error');\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"join-group container mt-4\" style={{ backgroundColor: theme.background, color: theme.text }}>\r\n      <h2>Available Groups</h2>\r\n      {availableGroups.length === 0 ? (\r\n        <p>No available groups to join.</p>\r\n      ) : (\r\n        <ul className=\"list-group mt-3\">\r\n          {availableGroups.map(group => (\r\n            <li key={group.id} className=\"list-group-item d-flex justify-content-between align-items-center\" style={{ backgroundColor: theme.background, color: theme.text, borderColor: theme.border }}>\r\n              <div>\r\n                <h4>{group.name}</h4>\r\n                <p>{group.description}</p>\r\n              </div>\r\n              <button className=\"btn btn-primary btn-sm\" onClick={() => handleJoinGroup(group.id)}>Join</button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default JoinGroup;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}